"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _runtime = _interopRequireDefault(require("regenerator-runtime/runtime"));

var _assignIn = _interopRequireDefault(require("lodash/assignIn"));

var _path = _interopRequireDefault(require("path"));

var _fs = _interopRequireDefault(require("fs"));

var _shelljs = _interopRequireDefault(require("shelljs"));

var _log = _interopRequireDefault(require("./log"));

var _defaultDependencies = _interopRequireDefault(require("./defaultDependencies"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// eslint-disable-next-line no-unused-vars
const {
  join
} = _path.default;
/**
 * Wrapper around electron-packager.
 * @class
 */

class ElectronPackager {
  constructor($) {
    this.log = new _log.default('electron-packager');
    this.$ = $;
  }

  async init() {
    this.packager = (await this.$.getDependency('electron-packager', _defaultDependencies.default['electron-packager'])).dependency;
  }
  /**
   * Runs the packager with provided arguments.
   *
   * @param {Object} args
   * @returns {Promise}
   */


  runPackager(args) {
    return new Promise((resolve, reject) => {
      this.packager(args, err => {
        if (err) {
          reject(err);
        } else {
          this.log.info(`wrote packaged app to ${this.$.env.paths.packageDir}`);
          resolve();
        }
      });
    });
  }

  async packageApp() {
    const {
      version
    } = JSON.parse(_fs.default.readFileSync(join(this.$.env.paths.meteorApp.root, 'node_modules', 'electron', 'package.json'), 'UTF-8'));
    const settings = this.$.desktop.getSettings();
    const {
      name
    } = settings;

    if (!name) {
      this.log.error('`name` field in settings.json not set');
      process.exit(1);
    }

    const arch = this.$.env.options.ia32 ? 'ia32' : 'x64';
    this.log.info(`packaging '${name}' for platform '${this.$.env.sys.platform}-${arch}'` + ` using electron v${version}`);

    try {
      await this.$.utils.rmWithRetries('-rf', _path.default.join(this.$.env.options.output, this.$.env.paths.packageDir));
    } catch (e) {
      throw new Error(e);
    }

    const args = {
      name,
      arch,
      prune: false,
      electronVersion: version,
      platform: this.$.env.sys.platform,
      dir: this.$.env.paths.electronApp.root,
      out: _path.default.join(this.$.env.options.output, this.$.env.paths.packageDir)
    };

    if ('packagerOptions' in settings) {
      const {
        packagerOptions
      } = settings;
      ['windows', 'linux', 'osx'].forEach(system => {
        if (this.$.env.os[`is${system[0].toUpperCase()}${system.substring(1)}`] && `_${system}` in packagerOptions) {
          (0, _assignIn.default)(packagerOptions, packagerOptions[`_${system}`]);
        }
      });
      Object.keys(packagerOptions).forEach(field => {
        if (packagerOptions[field] === '@version') {
          packagerOptions[field] = settings.version;
        }
      });
      (0, _assignIn.default)(args, packagerOptions);
    } // Move node_modules away. We do not want to delete it, just temporarily remove it from
    // our way.


    _fs.default.renameSync(this.$.env.paths.electronApp.nodeModules, this.$.env.paths.electronApp.tmpNodeModules);

    let extracted = false;

    if (this.$.utils.exists(this.$.env.paths.electronApp.extractedNodeModules)) {
      _fs.default.renameSync(this.$.env.paths.electronApp.extractedNodeModules, this.$.env.paths.electronApp.nodeModules);

      extracted = true;
    }

    try {
      await this.runPackager(args);
    } finally {
      if (extracted) {
        _shelljs.default.rm('-rf', this.$.env.paths.electronApp.extractedNodeModules);

        _shelljs.default.rm('-rf', this.$.env.paths.electronApp.nodeModules);
      } // Move node_modules back.


      _fs.default.renameSync(this.$.env.paths.electronApp.tmpNodeModules, this.$.env.paths.electronApp.nodeModules);
    }
  }

}

exports.default = ElectronPackager;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJqb2luIiwicGF0aCIsIkVsZWN0cm9uUGFja2FnZXIiLCJjb25zdHJ1Y3RvciIsIiQiLCJsb2ciLCJMb2ciLCJpbml0IiwicGFja2FnZXIiLCJnZXREZXBlbmRlbmN5IiwiZGVmYXVsdERlcGVuZGVuY2llcyIsImRlcGVuZGVuY3kiLCJydW5QYWNrYWdlciIsImFyZ3MiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImVyciIsImluZm8iLCJlbnYiLCJwYXRocyIsInBhY2thZ2VEaXIiLCJwYWNrYWdlQXBwIiwidmVyc2lvbiIsIkpTT04iLCJwYXJzZSIsImZzIiwicmVhZEZpbGVTeW5jIiwibWV0ZW9yQXBwIiwicm9vdCIsInNldHRpbmdzIiwiZGVza3RvcCIsImdldFNldHRpbmdzIiwibmFtZSIsImVycm9yIiwicHJvY2VzcyIsImV4aXQiLCJhcmNoIiwib3B0aW9ucyIsImlhMzIiLCJzeXMiLCJwbGF0Zm9ybSIsInV0aWxzIiwicm1XaXRoUmV0cmllcyIsIm91dHB1dCIsImUiLCJFcnJvciIsInBydW5lIiwiZWxlY3Ryb25WZXJzaW9uIiwiZGlyIiwiZWxlY3Ryb25BcHAiLCJvdXQiLCJwYWNrYWdlck9wdGlvbnMiLCJmb3JFYWNoIiwic3lzdGVtIiwib3MiLCJ0b1VwcGVyQ2FzZSIsInN1YnN0cmluZyIsImFzc2lnbkluIiwiT2JqZWN0Iiwia2V5cyIsImZpZWxkIiwicmVuYW1lU3luYyIsIm5vZGVNb2R1bGVzIiwidG1wTm9kZU1vZHVsZXMiLCJleHRyYWN0ZWQiLCJleGlzdHMiLCJleHRyYWN0ZWROb2RlTW9kdWxlcyIsInNoZWxsIiwicm0iXSwic291cmNlcyI6WyIuLi9saWIvcGFja2FnZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzXG5pbXBvcnQgcmVnZW5lcmF0b3JSdW50aW1lIGZyb20gJ3JlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSc7XG5pbXBvcnQgYXNzaWduSW4gZnJvbSAnbG9kYXNoL2Fzc2lnbkluJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBzaGVsbCBmcm9tICdzaGVsbGpzJztcblxuaW1wb3J0IExvZyBmcm9tICcuL2xvZyc7XG5pbXBvcnQgZGVmYXVsdERlcGVuZGVuY2llcyBmcm9tICcuL2RlZmF1bHREZXBlbmRlbmNpZXMnO1xuXG5jb25zdCB7IGpvaW4gfSA9IHBhdGg7XG5cbi8qKlxuICogV3JhcHBlciBhcm91bmQgZWxlY3Ryb24tcGFja2FnZXIuXG4gKiBAY2xhc3NcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRWxlY3Ryb25QYWNrYWdlciB7XG4gICAgY29uc3RydWN0b3IoJCkge1xuICAgICAgICB0aGlzLmxvZyA9IG5ldyBMb2coJ2VsZWN0cm9uLXBhY2thZ2VyJyk7XG4gICAgICAgIHRoaXMuJCA9ICQ7XG4gICAgfVxuXG4gICAgYXN5bmMgaW5pdCgpIHtcbiAgICAgICAgdGhpcy5wYWNrYWdlciA9IChhd2FpdCB0aGlzLiQuZ2V0RGVwZW5kZW5jeSgnZWxlY3Ryb24tcGFja2FnZXInLCBkZWZhdWx0RGVwZW5kZW5jaWVzWydlbGVjdHJvbi1wYWNrYWdlciddKSkuZGVwZW5kZW5jeTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSdW5zIHRoZSBwYWNrYWdlciB3aXRoIHByb3ZpZGVkIGFyZ3VtZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBhcmdzXG4gICAgICogQHJldHVybnMge1Byb21pc2V9XG4gICAgICovXG4gICAgcnVuUGFja2FnZXIoYXJncykge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wYWNrYWdlcihhcmdzLCAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvZy5pbmZvKGB3cm90ZSBwYWNrYWdlZCBhcHAgdG8gJHt0aGlzLiQuZW52LnBhdGhzLnBhY2thZ2VEaXJ9YCk7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgYXN5bmMgcGFja2FnZUFwcCgpIHtcbiAgICAgICAgY29uc3QgeyB2ZXJzaW9uIH0gPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhcbiAgICAgICAgICAgIGpvaW4oXG4gICAgICAgICAgICAgICAgdGhpcy4kLmVudi5wYXRocy5tZXRlb3JBcHAucm9vdCxcbiAgICAgICAgICAgICAgICAnbm9kZV9tb2R1bGVzJyxcbiAgICAgICAgICAgICAgICAnZWxlY3Ryb24nLFxuICAgICAgICAgICAgICAgICdwYWNrYWdlLmpzb24nXG4gICAgICAgICAgICApLCAnVVRGLTgnXG4gICAgICAgICkpO1xuXG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy4kLmRlc2t0b3AuZ2V0U2V0dGluZ3MoKTtcbiAgICAgICAgY29uc3QgeyBuYW1lIH0gPSBzZXR0aW5ncztcbiAgICAgICAgaWYgKCFuYW1lKSB7XG4gICAgICAgICAgICB0aGlzLmxvZy5lcnJvcignYG5hbWVgIGZpZWxkIGluIHNldHRpbmdzLmpzb24gbm90IHNldCcpO1xuICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYXJjaCA9IHRoaXMuJC5lbnYub3B0aW9ucy5pYTMyID8gJ2lhMzInIDogJ3g2NCc7XG5cbiAgICAgICAgdGhpcy5sb2cuaW5mbyhcbiAgICAgICAgICAgIGBwYWNrYWdpbmcgJyR7bmFtZX0nIGZvciBwbGF0Zm9ybSAnJHt0aGlzLiQuZW52LnN5cy5wbGF0Zm9ybX0tJHthcmNofSdgICtcbiAgICAgICAgICAgIGAgdXNpbmcgZWxlY3Ryb24gdiR7dmVyc2lvbn1gXG4gICAgICAgICk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuJC51dGlscy5ybVdpdGhSZXRyaWVzKFxuICAgICAgICAgICAgICAgICctcmYnLCBwYXRoLmpvaW4odGhpcy4kLmVudi5vcHRpb25zLm91dHB1dCwgdGhpcy4kLmVudi5wYXRocy5wYWNrYWdlRGlyKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYXJncyA9IHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBhcmNoLFxuICAgICAgICAgICAgcHJ1bmU6IGZhbHNlLFxuICAgICAgICAgICAgZWxlY3Ryb25WZXJzaW9uOiB2ZXJzaW9uLFxuICAgICAgICAgICAgcGxhdGZvcm06IHRoaXMuJC5lbnYuc3lzLnBsYXRmb3JtLFxuICAgICAgICAgICAgZGlyOiB0aGlzLiQuZW52LnBhdGhzLmVsZWN0cm9uQXBwLnJvb3QsXG4gICAgICAgICAgICBvdXQ6IHBhdGguam9pbih0aGlzLiQuZW52Lm9wdGlvbnMub3V0cHV0LCB0aGlzLiQuZW52LnBhdGhzLnBhY2thZ2VEaXIpXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKCdwYWNrYWdlck9wdGlvbnMnIGluIHNldHRpbmdzKSB7XG4gICAgICAgICAgICBjb25zdCB7IHBhY2thZ2VyT3B0aW9ucyB9ID0gc2V0dGluZ3M7XG5cbiAgICAgICAgICAgIFsnd2luZG93cycsICdsaW51eCcsICdvc3gnXS5mb3JFYWNoKChzeXN0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJC5lbnYub3NbYGlzJHtzeXN0ZW1bMF0udG9VcHBlckNhc2UoKX0ke3N5c3RlbS5zdWJzdHJpbmcoMSl9YF0gJiZcbiAgICAgICAgICAgICAgICAgICAgKGBfJHtzeXN0ZW19YCkgaW4gcGFja2FnZXJPcHRpb25zXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbkluKHBhY2thZ2VyT3B0aW9ucywgcGFja2FnZXJPcHRpb25zW2BfJHtzeXN0ZW19YF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhwYWNrYWdlck9wdGlvbnMpLmZvckVhY2goKGZpZWxkKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHBhY2thZ2VyT3B0aW9uc1tmaWVsZF0gPT09ICdAdmVyc2lvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFja2FnZXJPcHRpb25zW2ZpZWxkXSA9IHNldHRpbmdzLnZlcnNpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGFzc2lnbkluKGFyZ3MsIHBhY2thZ2VyT3B0aW9ucyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNb3ZlIG5vZGVfbW9kdWxlcyBhd2F5LiBXZSBkbyBub3Qgd2FudCB0byBkZWxldGUgaXQsIGp1c3QgdGVtcG9yYXJpbHkgcmVtb3ZlIGl0IGZyb21cbiAgICAgICAgLy8gb3VyIHdheS5cbiAgICAgICAgZnMucmVuYW1lU3luYyhcbiAgICAgICAgICAgIHRoaXMuJC5lbnYucGF0aHMuZWxlY3Ryb25BcHAubm9kZU1vZHVsZXMsXG4gICAgICAgICAgICB0aGlzLiQuZW52LnBhdGhzLmVsZWN0cm9uQXBwLnRtcE5vZGVNb2R1bGVzXG4gICAgICAgICk7XG5cbiAgICAgICAgbGV0IGV4dHJhY3RlZCA9IGZhbHNlO1xuXG4gICAgICAgIGlmICh0aGlzLiQudXRpbHMuZXhpc3RzKHRoaXMuJC5lbnYucGF0aHMuZWxlY3Ryb25BcHAuZXh0cmFjdGVkTm9kZU1vZHVsZXMpKSB7XG4gICAgICAgICAgICBmcy5yZW5hbWVTeW5jKFxuICAgICAgICAgICAgICAgIHRoaXMuJC5lbnYucGF0aHMuZWxlY3Ryb25BcHAuZXh0cmFjdGVkTm9kZU1vZHVsZXMsXG4gICAgICAgICAgICAgICAgdGhpcy4kLmVudi5wYXRocy5lbGVjdHJvbkFwcC5ub2RlTW9kdWxlc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGV4dHJhY3RlZCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5ydW5QYWNrYWdlcihhcmdzKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIGlmIChleHRyYWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBzaGVsbC5ybSgnLXJmJywgdGhpcy4kLmVudi5wYXRocy5lbGVjdHJvbkFwcC5leHRyYWN0ZWROb2RlTW9kdWxlcyk7XG4gICAgICAgICAgICAgICAgc2hlbGwucm0oJy1yZicsIHRoaXMuJC5lbnYucGF0aHMuZWxlY3Ryb25BcHAubm9kZU1vZHVsZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTW92ZSBub2RlX21vZHVsZXMgYmFjay5cbiAgICAgICAgICAgIGZzLnJlbmFtZVN5bmMoXG4gICAgICAgICAgICAgICAgdGhpcy4kLmVudi5wYXRocy5lbGVjdHJvbkFwcC50bXBOb2RlTW9kdWxlcyxcbiAgICAgICAgICAgICAgICB0aGlzLiQuZW52LnBhdGhzLmVsZWN0cm9uQXBwLm5vZGVNb2R1bGVzXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUE7O0FBQ0E7Ozs7QUFSQTtBQVVBLE1BQU07RUFBRUE7QUFBRixJQUFXQyxhQUFqQjtBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUNlLE1BQU1DLGdCQUFOLENBQXVCO0VBQ2xDQyxXQUFXLENBQUNDLENBQUQsRUFBSTtJQUNYLEtBQUtDLEdBQUwsR0FBVyxJQUFJQyxZQUFKLENBQVEsbUJB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